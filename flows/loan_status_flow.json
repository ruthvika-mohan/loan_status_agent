{
  "start": {
    "allowed_actions": {
      "yes": "verify_caller_id",
      "no": "ask_different_number"
    }
  },

  "verify_caller_id": {
    "action": "verify_phone_from_caller_id",
    "on_success": "status_response",
    "on_failure": "not_found_caller_id"
  },

  "ask_different_number": {
    "prompt": "No problem. Please enter the phone number associated with your loan application.",
    "action": "verify_phone",
    "on_success": "status_response",
    "on_failure": "not_found"
  },

  "not_found_caller_id": {
    "prompt": "I couldn't find an application with that number. Would you like to try a different number or speak with an agent?",
    "allowed_actions": {
      "retry": "ask_different_number",
      "agent": "handoff"
    }
  },

  "status_response": {
    "prompt": "Your loan application is currently {{status}}. Would you like an SMS update?",
    "allowed_actions": {
      "yes": "send_sms",
      "no": "llm_goodbye"
    }
  },

  "send_sms": {
    "prompt": "Okay, I've sent an SMS with your loan status.",
    "action": "llm_goodbye_after_sms"
  },

  "not_found": {
    "prompt": "I couldn't find your application with that number. You can say 'retry' to try another number, or 'agent' to speak with someone.",
    "allowed_actions": {
      "retry": "ask_different_number",
      "agent": "handoff"
    }
  },

  "handoff": {
    "prompt": "Please hold while I transfer you to an agent.",
    "action": "transfer_to_agent"
  },

  "llm_goodbye": {
    "action": "generate_goodbye"
  },

  "llm_goodbye_after_sms": {
    "action": "generate_goodbye"
  }
}