{
  "start": {
    "allowed_actions": {
      "yes": "verify_caller_id",
      "no": "ask_different_number"
    }
  },

  "verify_caller_id": {
    "action": "verify_phone_from_caller_id",
    "on_success": "status_response",
    "on_failure": "not_found_caller_id"
  },

  "ask_different_number": {
    "prompt": "No problem. Please say your 10-digit phone number clearly. You can say it all at once or digit by digit.",
    "action": "get_keypad_input",
    "on_success": "verify_phone_input",
    "on_failure": "ask_different_number"
  },

  "verify_phone_input": {
    "action": "verify_phone",
    "on_success": "status_response",
    "on_failure": "not_found"
  },

  "not_found_caller_id": {
    "prompt": "I couldn't find an application with that number. Would you like to try a different number? Say yes to enter a new number, or say agent to speak with someone.",
    "allowed_actions": {
      "yes": "ask_different_number",
      "agent": "handoff"
    }
  },

  "status_response": {
    "prompt": "Your loan application is currently {{status}}. Would you like an SMS update? Say yes or no.",
    "allowed_actions": {
      "yes": "send_sms",
      "no": "llm_goodbye"
    }
  },

  "send_sms": {
    "prompt": "Perfect. I've sent an SMS with your loan status details.",
    "action": "llm_goodbye_after_sms"
  },

  "not_found": {
    "prompt": "I couldn't find an application with that number. Would you like to try again? Say yes to enter another number, or say agent to speak with someone.",
    "allowed_actions": {
      "yes": "ask_different_number",
      "agent": "handoff"
    }
  },

  "handoff": {
    "prompt": "One moment please, I'm transferring you to an agent now.",
    "action": "transfer_to_agent"
  },

  "llm_goodbye": {
    "action": "generate_goodbye"
  },

  "llm_goodbye_after_sms": {
    "action": "generate_goodbye"
  }
}